<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Generador de Carteles</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Botón rojo fijo arriba a la derecha */
    .btn-limpiar{
      background:#d32f2f;color:#fff;border:none;border-radius:6px;
      padding:10px 12px;display:inline-flex;align-items:center;gap:8px;
      cursor:pointer;transition:background-color .2s;box-shadow:0 1px 2px rgba(0,0,0,.1);
    }
    .btn-limpiar:hover{ background:#b71c1c; }
    .btn-limpiar svg{ display:block }
    .btn-limpiar-corner{
      position:fixed;top:16px;right:16px;z-index:1000;white-space:nowrap;
    }
    @media (max-width:600px){ .btn-limpiar-corner span{ display:none } }
  </style>
</head>
<body>

  <!-- Botón Limpiar (esquina superior derecha) -->
  <button class="btn-limpiar btn-limpiar-corner"
          onclick="confirmarYLimpiar()"
          aria-label="Limpiar todos los campos"
          title="Limpiar todos los campos">
    <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
      <rect x="12" y="2" width="2" height="11" rx="1" transform="rotate(30 13 7)" fill="currentColor"></rect>
      <path d="M4 18h10l2-4H6z" fill="currentColor"></path>
    </svg>
    <span>Limpiar todos los campos</span>
  </button>

  <h1>Generador de Carteles</h1>

  <textarea id="inputDatos" placeholder="Pega aquí los datos (separados por coma)..."></textarea>

  <div class="controles">
    <select id="tipoCartel">
      <option value="%">%</option>
    </select>
    <select id="formato">
      <option value="A4">A4</option>
      <option value="A6">A6</option>
    </select>
    <button onclick="generarCartel()">Generar CPT</button>
  </div>

  <div id="resultado"></div>

  <h2>Cargar hasta 20 carteles</h2>
  <div class="tabla-carteles">
    <table border="1">
      <thead>
        <tr>
          <th>EAN/SKU</th>
          <th>PRECIO</th>
          <th>% DESC.</th>
          <th>precio manual</th>
          <th>Fecha inicio</th>
          <th>Fecha final</th>
          <th>TIPO DE CARTEL</th>
          <th>MAS CLUB</th>
          <th>A4</th>
          <th>A6</th>
          <th>DEPTO</th>
          <th>DESCRIPCION</th>
          <th>SKU</th>
          <th>EAN</th>
        </tr>
      </thead>
      <tbody id="tablaCartelesBody"></tbody>
    </table>
  </div>

  <div class="botones-manuales">
    <button onclick="cargarDesdeTabla()">Generar Banderas Manuales</button>
    <button class="boton-agregar" onclick="agregarFila()">+</button>
  </div>

  <script src="main.js"></script>
  <script>
    // Confirmación y limpieza (usa limpiarTodo() si existe; si no, hace un fallback seguro)
    function confirmarYLimpiar(){
      if(!confirm('¿Limpiar todos los campos? Esta acción no se puede deshacer.')) return;

      if (typeof window.limpiarTodo === 'function') {
        window.limpiarTodo();
        return;
      }

      // Fallback básico
      const ta = document.getElementById('inputDatos'); if (ta) ta.value = '';
      const tipo = document.getElementById('tipoCartel'); if (tipo) tipo.value = '%';
      const formato = document.getElementById('formato'); if (formato) formato.value = 'A4';
      const res = document.getElementById('resultado'); if (res) res.innerHTML = '';
      document.querySelectorAll('input[type="text"],input[type="number"],input[type="date"]').forEach(el=>el.value='');
      document.querySelectorAll('input[type="checkbox"]').forEach(el=>el.checked=false);
      const tbody = document.getElementById('tablaCartelesBody');
      if (tbody){ tbody.innerHTML=''; if (typeof window.agregarFila==='function') window.agregarFila(); }
      ta?.focus();
    }
  </script>
</body>
</html>
